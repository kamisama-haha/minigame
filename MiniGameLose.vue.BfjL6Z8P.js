import{d as T,ad as v,u as r,r as G,c as h,q as L,o as c,a as u,e as n,k as _,b as s,t as S,l as $,p as H,n as w,m as g,y as K,_ as N,x as A}from"./entry.Dv1IsjD4.js";import{_ as C}from"./Preloader.vue.EL_BqhER.js";const x=""+globalThis.__publicAssetsURL("images/minigame/alarm_clock.webp"),z=""+globalThis.__publicAssetsURL("images/minigame/alarm_clock.png"),B=x,E={class:"bs-content"},W={class:"bs-content-image is-minigame-alarm-clock"},Z=n("picture",null,[n("source",{srcset:B,type:"image/webp"}),n("img",{src:z})],-1),P=["innerHTML"],U=["innerHTML"],D={class:"bs-content-buttons"},R=["disabled"],V={class:"minigame-button-replay"},j=["innerHTML"],q={class:"minigame-button-replay-timer"},F=["innerHTML"],Q=T({__name:"MiniGameLose",setup(I){const{$event:M}=g(),e=v(),o=r(),i=G(!1),f=()=>{r().trackEvent("minigame_puzzle_watch_youtube")},p=async()=>{e.sceneLoaded&&(i.value||(i.value=!0,await new Promise(t=>setTimeout(t,400)),await e.postStartDailyKeysMiniGame().then(t=>{H().useHapticFeedback("heavy"),e.showGamePage(),e.startGame(),M("bs:close"),r().trackEvent("minigame_puzzle_retry_success")}).catch(async t=>{w.promise({}).reject({title:g().$i18n.t("messages.oops"),duration:3e3}),r().trackEvent("minigame_puzzle_retry_error"),await K().postConfig()}).finally(()=>{setTimeout(()=>{i.value=!1},400)})))},k=h(()=>{var l,m,b;if(!e.dailyKeysMiniGame||(l=e.dailyKeysMiniGame)!=null&&l.remainSecondsToNextAttempt&&(((m=e.dailyKeysMiniGame)==null?void 0:m.remainSecondsToNextAttempt)<=3&&e.openPage(),((b=e.dailyKeysMiniGame)==null?void 0:b.remainSecondsToNextAttempt)<=0))return"00:00";const t=Math.floor(e.dailyKeysMiniGame.remainSecondsToNextAttempt%60),d=Math.floor(e.dailyKeysMiniGame.remainSecondsToNextAttempt/60%60),a=Math.floor(e.dailyKeysMiniGame.remainSecondsToNextAttempt/3600);return a>0?`${o.padWithZero(a)}:${o.padWithZero(d)}:${o.padWithZero(t)}`:`${o.padWithZero(d)}:${o.padWithZero(t)}`}),y=h(()=>{var t;return e.dailyKeysMiniGame&&((t=e.dailyKeysMiniGame)==null?void 0:t.remainSecondsToNextAttempt)>0});return L(()=>{r().trackEvent("minigame_puzzle_dialog_lose")}),(t,d)=>{const a=N,l=A,m=C;return c(),u("div",E,[n("div",W,[_(a,{name:"alarm-clock-glow"}),Z]),n("div",{class:"bs-content-title",innerHTML:t.$t("minigame.lose_title")},null,8,P),n("div",{class:"bs-content-description no-gap",innerHTML:t.$t("minigame.lose_description")},null,8,U),n("div",D,[_(l,{class:"bottom-sheet-button button button-primary button-default",to:s(e).dailyKeysMiniGame.youtubeUrl,onClick:f,target:"_blank",innerHTML:t.$t("buttons.watch_youtube_video")},null,8,["to","innerHTML"]),s(y)?(c(),u("button",{key:0,class:"button button-default button-dark",onClick:p,disabled:!s(i)&&s(y)},[n("div",V,[n("p",{innerHTML:t.$t("buttons.retry")},null,8,j),n("div",q,[_(a,{class:"is-16",name:"alarm"}),n("p",null,S(s(k)),1)])])],8,R)):(c(),u("button",{key:1,class:"button button-primary button-default",onClick:p},[!s(i)&&s(e).sceneLoaded?(c(),u("span",{key:0,innerHTML:t.$t("buttons.retry")},null,8,F)):(c(),$(m,{key:1}))]))])])}}});export{Q as _};
