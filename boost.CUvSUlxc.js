import{_ as Y}from"./BalanceLarge.vue.CUoPNMix.js";import{d as H,i as E,u as w,G as C,H as U,j as F,r as z,c as L,o as u,a as v,e as t,k as h,C as I,b as e,l as k,n as R,m as $,J as j,K as V,U as q,_ as P,L as Q,s as X,q as G,z as M,B as S,t as N,v as J,M as W,N as Z,F as x,D as oo,y as to,w as O,x as so}from"./entry.Dv1IsjD4.js";import{_ as A}from"./Price.vue.Cny252bW.js";import{_ as K}from"./Preloader.vue.EL_BqhER.js";const eo={class:"bs-content"},no={class:"bs-content-image"},io=["innerHTML"],co=["innerHTML"],lo={class:"bs-content-info"},ro=["disabled"],ao=["innerHTML"],uo=H({__name:"GetEnergy",props:{boost:{}},setup(b){const{$event:r}=$(),_=E();w();const n=C(),a=U();F();const o=b;let c,s,d=0;const l=z(!1),m=L(()=>!0);async function i(){l.value=!0,c=R.promise({title:$().$i18n.t("messages.recharging_energy")}),_.sync_tap_timeout?s=j(()=>{d+=1,_.sync_tap_timeout||(clearInterval(s),s=null,y()),d>=15&&(clearInterval(s),s=null,c==null||c.reject($().$i18n.t("messages.oops")),l.value=!1)},1e3):await y()}async function y(){await n.postBuyBoost(o.boost.id).then(f=>{r("bs:close"),c==null||c.resolve({title:$().$i18n.t("messages.recharging_success"),duration:3e3}),r("boost-full-energy:success"),n.postBoostsForBuy(),V(a(q.GAME_INDEX))}).catch(f=>{c==null||c.reject($().$i18n.t("messages.oops"))}).finally(()=>{setTimeout(()=>{l.value=!1},400)})}return(f,p)=>{const g=P,T=A,B=K;return u(),v("div",eo,[t("div",no,[h(g,{class:"icon-energy-large",name:"energy"})]),t("div",{class:"bs-content-title",innerHTML:f.$t("boost.full_energy")},null,8,io),t("div",{class:"bs-content-description",innerHTML:f.$t("boost.recharge_energy")},null,8,co),t("div",lo,[h(T,{price:0,text:f.$t("messages.free"),size:"large",class:I({"is-grayscale":!e(m)}),round:!1},null,8,["text","class"])]),t("button",{class:"bottom-sheet-button button button-primary button-large",onClick:i,disabled:e(l)||!e(m)||e(_).stop},[e(l)?(u(),k(B,{key:1})):(u(),v("span",{key:0,innerHTML:e(m)?f.$t("buttons.get"):f.$t("messages.not_available")},null,8,ao))],8,ro)])}}}),_o={class:"boost-item-image"},mo={class:"boost-item-content"},bo=["innerHTML"],po={class:"boost-item-content-bottom"},go={class:"boost-item-bottom-info"},vo=["innerHTML"],fo=H({__name:"FullEnergy",setup(b){const{$event:r,$listen:_,$stopListen:n}=$(),{t:a}=F();E();const o=C(),c=w(),s=L(()=>o.boostsForBuy.find(p=>p.id===Q.FULL_ENERGY)),d=L(()=>{const p=s.value.level??1,g=s.value.maxLevel??3;return`${g-(p-1)}/${g} ${a("boost.available")}`}),l=L(()=>s.value.level<=s.value.maxLevel&&s.value.cooldownSeconds<=1),m=()=>{l.value&&r("bs:open",{component:J(uo),props:{boost:s}})},i=()=>{l.value||(o.fullEnergySecondsCountdown=s.value.cooldownSeconds,o.fullEnergySecondsCountdown+=E().dtServer+2,y(),o.fullEnergyInterval||(o.fullEnergyInterval=j(()=>y(),1e3)))},y=()=>{let p=1;const g=c.getNowTimestamp();o.timestamp_full_energy&&g-o.timestamp_full_energy>1&&(p=g-o.timestamp_full_energy),o.fullEnergySecondsCountdown-=p;const T=Math.floor(o.fullEnergySecondsCountdown/3600),B=Math.floor(o.fullEnergySecondsCountdown%3600/60),D=o.fullEnergySecondsCountdown%60;T<=0&&B<=0&&D<=0?(o.setFullEnergyTimerText(),o.resetFullEnergyTimer()):T>0?o.fullEnergyTimerText=`${a("plural.hours",{n:T})} ${a("boost.time_left")}`:B>0?o.fullEnergyTimerText=`${a("plural.minutes",{n:B+1})} ${a("boost.time_left")}`:o.fullEnergyTimerText=`${a("plural.seconds",{n:D})} ${a("boost.time_left")}`,f(),o.timestamp_full_energy=c.getNowTimestamp()},f=()=>{const p=o.boostsForBuy.map(g=>g.id===s.value.id?{...g,cooldownSeconds:o.fullEnergySecondsCountdown+1}:g);o.setBoostsForBuy(p)};return X(()=>{n("boost-full-energy:success",i)}),G(()=>{_("boost-full-energy:success",i),i()}),(p,g)=>{const T=P,B=M("motion-pop");return u(),v("div",{class:I(["boost-item",{"is-not-available":!e(l)}]),onClick:m},[S((u(),v("div",_o,[h(T,{name:"energy"})])),[[B]]),t("div",mo,[t("div",{class:"boost-item-content-top",innerHTML:p.$t("boost.full_energy")},null,8,bo),t("div",po,N(e(d)),1),t("div",go,[t("div",{class:"boost-countdown",innerHTML:e(o).fullEnergyTimerText},null,8,vo)])])],2)}}}),$o={class:"boost-column"},ho={class:"boost-item is-disabled"},yo={class:"boost-item-image"},To=["src","alt"],Bo={class:"boost-item-content"},Lo=["innerHTML"],Mo={class:"boost-item-content-bottom"};function So(b,r){const _=fo,n=M("motion-pop");return u(),v("div",$o,[h(_),t("div",ho,[S((u(),v("div",yo,[t("img",{class:"is-boost",src:"IMAGE_BOOST"in b?b.IMAGE_BOOST:e(W),alt:b.$t("buttons.boost")},null,8,To)])),[[n]]),t("div",Bo,[t("div",{class:"boost-item-content-top",innerHTML:b.$t("boost.turbo")},null,8,Lo),t("div",Mo,N(b.$t("boost.coming_soon")),1)])])])}const Eo={},Ho=Z(Eo,[["render",So]]),Co={class:"boost-item"},ko={class:"boost-item-image"},wo=["src","alt"],Fo={class:"boost-item-content"},Io=["innerHTML"],No={class:"boost-item-content-bottom"},Po={class:"boost-item-icon"},Go=H({__name:"Boost",props:{boost:{}},setup(b){w();const r=C(),_=E(),n=b,a=L(()=>(_.balanceCoins??0)>=(n.boost.price??-1));return(o,c)=>{const s=A,d=P,l=M("motion-pop");return u(),v("div",Co,[t("div",ko,[S(t("img",{src:e(r).getBoostImage(o.boost.id),alt:o.boost.id},null,8,wo),[[l]])]),t("div",Fo,[t("div",{class:"boost-item-content-top",innerHTML:e(r).getBoostName(o.boost.id)},null,8,Io),t("div",No,[h(s,{price:o.boost.price,class:I({"is-grayscale":!e(a)})},null,8,["price","class"]),t("span",null,"聽鈥� "+N(o.$t("boost.n_level",{lv:o.boost.level+1})),1)])]),t("div",Po,[h(d,{name:"caret-right"})])])}}}),Ao={class:"bs-content"},Do={class:"bs-content-image"},Oo=["src","alt"],Uo=["innerHTML"],zo=["innerHTML"],Ro=["innerHTML"],jo={class:"bs-content-info"},Vo=["disabled"],qo=["innerHTML"],Xo=H({__name:"BuyBoost",props:{boost:{}},setup(b){const{$event:r}=$(),_=E(),n=C(),a=w(),o=U(),{t:c}=F(),s=b,d=z(!1),l=L(()=>(_.balanceCoins??0)>=(s.boost.price??-1));async function m(){d.value=!0,await n.postBuyBoost(s.boost.id).then(i=>{r("bs:close"),r("buy-boost:success"),setTimeout(()=>{d.value=!1},400),V(o(q.GAME_INDEX)),R.success({message:`${$().$i18n.t("boost.success")} ${n.getBoostName(s.boost.id)} ${c("boost.n_level",{lv:s.boost.level+1})}`,duration:4e3})}).catch(i=>{d.value=!1,a.showErrorPush(),console.log(i)})}return(i,y)=>{const f=A,p=K;return u(),v("div",Ao,[t("div",Do,[t("img",{class:"is-coin-star",src:e(n).getBoostImage(i.boost.id),alt:i.boost.id},null,8,Oo)]),t("div",{class:"bs-content-title",innerHTML:e(n).getBoostName(i.boost.id)},null,8,Uo),t("div",{class:"bs-content-description",innerHTML:e(n).getBoostDescription(i.boost)},null,8,zo),t("div",{class:"bs-content-target",innerHTML:e(n).getBoostTarget(i.boost)},null,8,Ro),t("div",jo,[h(f,{price:i.boost.price,size:"large",class:I({"is-grayscale":!e(l)}),round:!1},null,8,["price","class"]),t("span",null,"聽鈥� "+N(i.$t("boost.n_level",{lv:i.boost.level+1})),1)]),t("button",{class:"bottom-sheet-button button button-primary button-large",onClick:m,disabled:e(d)||!e(l)||e(_).stop},[e(d)?(u(),k(p,{key:1})):(u(),v("span",{key:0,innerHTML:e(l)?i.$t("buttons.get"):i.$t("messages.not_enough_funds")},null,8,qo))],8,Vo)])}}}),Jo={class:"boost-column"},Ko=H({__name:"PaidList",setup(b){const{$event:r,$listen:_,$stopListen:n}=$(),a=C();G(()=>{_("buy-boost:success",o),a.postBoostsForBuy()}),X(()=>{n("buy-boost:success",o)});function o(s){}function c(s){r("bs:open",{component:J(Xo),props:{boost:s}})}return(s,d)=>{const l=Go;return u(),v("div",Jo,[(u(!0),v(x,null,oo(e(a).boostsForBuy.filter(m=>m.price>0),(m,i)=>(u(),k(l,{key:`${m.id}`,onClick:y=>c(m),boost:m},null,8,["onClick","boost"]))),128))])}}}),Yo={class:"main"},Qo={class:"inner boost"},Wo=["innerHTML"],Zo=["innerHTML"],xo=["innerHTML"],nt=H({__name:"boost",setup(b){E();const r=C(),_=to();return F(),G(()=>{r.boostsForBuy.length||r.postBoostsForBuy()}),(n,a)=>{const o=Y,c=so,s=Ho,d=Ko,l=M("motion-slide-right"),m=M("motion-pop"),i=M("motion-slide-left");return u(),v("main",Yo,[t("div",Qo,[S(t("div",{class:"boost-top-text",innerHTML:n.$t("boost.balance")},null,8,Wo),[[l]]),S(h(o,null,null,512),[[m]]),S(h(c,{class:"boost-top-link",to:e(_).getGuidLink,target:"_blank",innerHTML:n.$t("boost.how_works")},null,8,["to","innerHTML"]),[[i]]),t("div",{class:"section-title",innerHTML:n.$t("boost.free_daily")},null,8,Zo),e(r).boostsForBuy.length?(u(),k(s,{key:0})):O("",!0),t("div",{class:"section-title",innerHTML:n.$t("boost.boosters")},null,8,xo),e(r).boostsForBuy.length?(u(),k(d,{key:1})):O("",!0)])])}}});export{nt as default};
