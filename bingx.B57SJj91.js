import{d as y,u as E,i as S,r as u,Z as U,o as i,a,e,b as n,t as x,q as D,s as W,F,D as ee,w as H,k as _,y as ne,H as se,av as M,a4 as G,m as X,a3 as te,Q as oe,c as A,K as ie,U as ae,z as k,B as g,C as I,ab as re,aa as ce,l as V,v as le,_ as de}from"./entry.Dv1IsjD4.js";import{_ as O}from"./Preloader.vue.EL_BqhER.js";import{_ as q}from"./image.vue.z4uqTG5J.js";import{_ as C}from"./Price.vue.Cny252bW.js";const _e={class:"user-info"},ue={class:"user-info-avatar"},me=["src"],he={class:"user-info-content"},pe={class:"user-info-content-data"},fe=y({__name:"ExchangeReferral",props:{user:{}},setup($){const h=$,l=E();S();const t=u(l.getTelegramAvatar(h.user.telegramUser));t.value||(t.value=U);function m(){t.value=U}return(r,c)=>(i(),a("div",_e,[e("div",ue,[e("img",{src:n(t),onError:m},null,40,me)]),e("div",he,[e("p",null,x(n(l).composeTelegramName(r.user.telegramUser)),1),e("div",pe,[e("span",null,x(r.$t("bingx.task_completed")),1)])])]))}}),ve={class:"friends-wrap"},ge={class:"section-title"},be={key:0,class:"friends-list"},$e={class:"friends-item-user"},Le={class:"friends-item-stats"},Te={key:1,class:"friends-progress"},ke={key:2,class:"friends-no"},He=["innerHTML"],Me=y({__name:"ExchangeList",setup($){const h=S(),l=E(),t=u(0),m=u(0),r=u(!0),c=u([]);function p(){r.value=!0,h.postExchangeReferralStat(m.value).then(o=>{o.stats.length&&(c.value.push(...o.stats),m.value+=o.stats.length),o.count&&(t.value=o.count)}).catch(o=>{l.showErrorPush()}).finally(()=>{r.value=!1})}D(()=>{p(),document.addEventListener("scroll",d)}),W(()=>{document.removeEventListener("scroll",d)});const d=()=>{const o=window.innerHeight,v=window.pageYOffset||document.documentElement.scrollTop,b=document.body.scrollHeight;o+v+30>=b&&m.value<t.value&&!r.value&&p()};return(o,v)=>{const b=fe,L=C,f=O;return i(),a("div",ve,[e("div",ge,x(o.$t("bingx.players"))+" "+x(n(t)>0?`(${n(t)})`:""),1),n(c).length?(i(),a("div",be,[(i(!0),a(F,null,ee(n(c),(T,w)=>(i(),a("div",{class:"friends-item",key:w},[e("div",$e,[_(b,{user:T},null,8,["user"])]),e("div",Le,[_(L,{price:T.referral.sumCoins,prefix:"+",round:!0},null,8,["price"])])]))),128))])):H("",!0),n(r)?(i(),a("div",Te,[_(f)])):H("",!0),!n(r)&&n(c).length===0?(i(),a("div",ke,[e("p",{innerHTML:o.$t("bingx.no_friends")},null,8,He)])):H("",!0)])}}}),xe=""+globalThis.__publicAssetsURL("images/earn/bingx.svg"),ye={class:"bs-content"},Ee={class:"bs-content-image"},Se=["innerHTML"],we=["innerHTML"],Ce={class:"bs-content-info"},Be={class:"friends-invite-info-item no-circle"},Ne=["innerHTML"],Re=["innerHTML"],Pe=y({__name:"ExchangeLinkAdded",setup($){const{$event:h}=X();S(),E(),ne(),se();function l(){h("bs:close")}return(t,m)=>{const r=q,c=C;return i(),a("div",ye,[e("div",Ee,[_(r,{name:n(M).BINGX},null,8,["name"])]),e("div",{class:"bs-content-title has-top-gap",innerHTML:t.$t("bingx.dialog_title")},null,8,Se),e("div",{class:"bs-content-target",innerHTML:t.$t("bingx.dialog_text")},null,8,we),e("div",Ce,[e("div",Be,[_(c,{price:5e4,prefix:"+",round:!1,color:"yellow"}),G("聽"),e("span",{innerHTML:t.$t("friends.for_you")},null,8,Ne)])]),e("button",{class:"bottom-sheet-button button button-primary button-large",onClick:l},[e("span",{innerHTML:t.$t("bingx.dialog_button")},null,8,Re)])])}}}),Ue={class:"main"},Ae=["innerHTML"],Ie={class:"input-wrapper has-check"},Ve=["placeholder"],De=["disabled"],Fe=["innerHTML"],Ge=["innerHTML"],Xe=["innerHTML"],Oe=["innerHTML"],qe={class:"friends-invite"},ze={class:"friends-invite-image is-square"},Ke={class:"friends-invite-info"},Qe=["innerHTML"],Ye={class:"friends-invite-info-item"},Ze=["innerHTML"],je=["innerHTML"],Je=["innerHTML"],We={class:"earn-item"},en={class:"earn-item-image"},nn={src:xe},sn={class:"earn-item-content"},tn=["innerHTML"],on={class:"earn-item-content-bottom"},an={class:"earn-item-icon"},_n=y({__name:"bingx",setup($){const{$event:h}=X(),l=S(),t=E(),m=te(),r=oe(),c=u(!1),p=u(!1),d=u(""),o=u(!1),v=A(()=>/^https:\/\/.*bingx\./i.test(d.value));D(()=>{var s;((s=l.currentExchange)==null?void 0:s.id)!==M.BINGX&&ie(ae.GAME_INDEX)});const b=()=>{p.value=!0},L=()=>{p.value=!1},f=A(()=>{var s;return(s=l.exchangeRefLinks[M.BINGX])==null?void 0:s.exchangeRefLink}),T=async()=>{v.value&&(c.value=!0,await r.postExchangeRefLink(d.value).then(s=>{d.value="",l.setUserResponseData(s),h("bs:open",{component:le(Pe)})}).catch(s=>{t.showErrorPush()}).finally(()=>{o.value=!1,setTimeout(()=>{c.value=!1},300)}))},w=()=>{o.value=!0,d.value=f.value};return(s,B)=>{const N=de,z=O,K=q,R=C,Q=Me,Y=k("motion-slide-bottom"),Z=k("motion-slide-right"),j=k("motion-slide-left"),P=k("motion-pop");return i(),a("main",Ue,[e("div",{class:I(["inner friends",{"is-exchange":!n(f),"is-exchange-added":n(f),"is-keyboard-opened":n(p)}])},[g((i(),a("div",{class:I(["friends-button is-exchange",{"is-keyboard-opened":n(p)}])},[!n(f)||n(o)?(i(),a(F,{key:0},[e("div",{class:"section-title",innerHTML:s.$t("bingx.link_title")},null,8,Ae),e("div",Ie,[g(e("input",{class:"input input-default",name:"refLink","onUpdate:modelValue":B[0]||(B[0]=J=>re(d)?d.value=J:null),placeholder:s.$t("bingx.link_text"),onFocus:b,onBlur:L},null,40,Ve),[[ce,n(d)]]),n(v)?(i(),V(N,{key:0,class:"is-16",name:"check"})):H("",!0)]),e("button",{class:"button button-primary button-default",onClick:T,disabled:n(c)||!n(v)},[n(c)?(i(),V(z,{key:1})):(i(),a("span",{key:0,innerHTML:s.$t("buttons.add")},null,8,Fe))],8,De)],64)):(i(),a("button",{key:1,class:"button button-primary button-default",onClick:w},[e("span",{innerHTML:s.$t("bingx.change_link")},null,8,Ge)]))],2)),[[Y]]),g(e("div",{class:"friends-title",innerHTML:s.$t("bingx.title")},null,8,Xe),[[Z]]),g(e("div",{class:"friends-description",innerHTML:s.$t("bingx.description")},null,8,Oe),[[j]]),e("ul",qe,[e("li",null,[e("div",ze,[g(_(K,{name:n(M).BINGX},null,8,["name"]),[[P]])]),e("div",Ke,[e("div",{class:"friends-invite-info-title",innerHTML:s.$t("bingx.item_title")},null,8,Qe),e("div",Ye,[_(R,{price:5e4,prefix:"+",round:!1,color:"yellow"}),G("聽"),e("span",{innerHTML:s.$t("friends.for_you")},null,8,Ze)])])])]),e("div",{class:"section-title",innerHTML:s.$t("bingx.example_title")},null,8,je),e("div",{class:"section-description",innerHTML:s.$t("bingx.example_description")},null,8,Je),e("div",We,[e("div",en,[g(e("img",nn,null,512),[[P]])]),e("div",sn,[e("div",{class:"earn-item-content-top",innerHTML:s.$t("bingx.example_text",{name:n(t).composeTelegramName(n(m).telegram_user)})},null,8,tn),e("div",on,[_(R,{price:5e4,prefix:"+",round:!1})])]),e("div",an,[_(N,{name:"caret-right"})])]),_(Q)],2)])}}});export{_n as default};
